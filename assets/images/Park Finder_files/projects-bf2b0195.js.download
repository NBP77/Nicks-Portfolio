System.register(["./chunk-vendor.js","./chunk-frameworks.js"],(function(t,e){"use strict";var n,o,r,c,s,i,a,l,u,d,m,p,j,f,h,g,v,y,b,S,C,q,L,A,w,k,T,E;return{setters:[function(t){n=t.o,o=t.f,r=t.d,c=t.I,s=t.a,i=t.r,a=t.h,l=t.n},function(t){u=t.am,d=t.b2,m=t.j,p=t.aG,j=t.o,f=t.w,h=t.f,g=t.n,v=t.S,y=t.J,b=t.d,S=t.r,C=t.aR,q=t.p,L=t.T,A=t.e,w=t.u,k=t.C,T=t.a$,E=t.a}],execute:function(){function t(t){const e=new WeakMap;for(const n of t)e.set(n,n.getBoundingClientRect());return e}async function x(t,e,n){const o=e.get(t),r=n.get(t),c=o.left-r.left,s=o.top-r.top;0===c&&0===s||(await d(),t.style.transform=`translateZ(0) translate(${c}px, ${s}px)`,t.style.transition="transform 0s",await d(),t.style.transform="",t.style.transition="transform 500ms",await new Promise((e=>t.addEventListener("transitionend",e,{once:!0}))),t.style.transition="")}function M(e,n){const o=t(e),r=[];for(const t of e)r.push(x(t,n,o));return Promise.all(r)}let I;function D(t){if(!t)return;I&&clearTimeout(I);const e=document.querySelector(".js-project-updated-message");e.textContent=t,e.classList.remove("d-none"),I=window.setTimeout((function(){e.textContent="",e.classList.add("d-none")}),3e3)}function $(t,e){const n="column-"+t.id,o=document.getElementById(n);if(o)return o;{const o=new c;return o.id=n,o.src=`${e}/${t.id}`,o}}function H(t,e){const n="card-"+t,o=document.getElementById(n);if(o)return o;{const o=new c;return o.id=n,o.src=`${e}/${t}`,o.onerror=function(){o.remove()},o}}function _(t,e){const n=e.querySelector(".js-project-column-automation-footer");if(!n)return;const o=n.querySelector(".js-project-column-automation-summary");t.automation_summary&&t.purpose?(o.textContent=t.purpose,o.setAttribute("aria-label",t.automation_summary),n.classList.remove("d-none")):n.classList.add("d-none")}function B(t,e,n,o){t.setAttribute("data-column-id",e),t.setAttribute("data-column-name",n),t.href="#column-"+e,t.querySelector(".js-column-nav-name").textContent=n;const r=t.querySelector(".js-column-nav-card-count");r.textContent=o,r.setAttribute("aria-label",`Contains ${o} ${1===Number(o)?"item":"items"}`)}function P(t,e,n,o,r,c){const s=t.content.cloneNode(!0),i=s.querySelector(".js-project-column-navigation-item");i.classList.toggle("selected",c),B(i,n,o,r);const a=e.querySelectorAll(".js-project-column-navigation-item").length+1;s.querySelector(".js-column-nav-index").textContent=a.toString(),e.appendChild(s)}function R(t,e,n){const o=document.createDocumentFragment();for(const r of e)o.appendChild(n[r]);t.innerHTML="",t.appendChild(o)}n("submit",".js-project-name-update",(async function(t){var e;const n=t.currentTarget,r=n.closest(".js-details-container");let c,s;t.preventDefault();try{c=await fetch(n.action,{method:n.method,body:new FormData(n),headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),s=await c.json()}catch(i){}if(c&&!c.ok){const t=n.querySelector(".js-project-form-group"),o=r.querySelector(".js-project-form-error"),c=n.getAttribute("data-fallback-error-message");o&&(o.textContent=(null===(e=s.errors)||void 0===e?void 0:e[0])||c),t&&t.classList.add("errored")}else if(s){r.querySelector(".js-project-name-label").textContent=s.project_name,u(r,{force:!1});const t=r.querySelector(".js-project-hovercard");if(t){const e=t.getAttribute("data-hovercard-url"),n=/\?ts=(.+)$/;(null==e?void 0:e.match(n))&&t.setAttribute("data-hovercard-url",e.replace(n,"?ts="+Date.now()))}}!function(t){for(const e of t.elements)(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&(e.defaultValue=e.value)}(n),o(n,"deprecatedAjaxComplete")}));const F=r((async function(e,n){D(n.message);const r=e.querySelectorAll(".js-project-column"),c=t(r),s=e.getAttribute("data-url")||"",i=e.getAttribute("data-columns-url")||"",a=e.getAttribute("data-cards-url")||"";let l=n.state;if(!l){const t=await fetch(s,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!t.ok)return;l=await t.json()}o(e,"will-update-project",l);const u=document.activeElement;if(function(t,e){const n=Array.from(t.querySelectorAll(".js-project-column")).map((t=>t.getAttribute("data-id")));return e.columns.map((t=>String(t.id))).join(",")!==n.join(",")}(e,l)){o(e,"will-update-project-columns");const t={},n=document.createDocumentFragment();for(const e of l.columns){const o=$(e,i),r=o.querySelector(".js-project-column-cards");r&&(t[r.id]=r.scrollTop),n.appendChild(o)}const s=e.querySelector(".js-new-project-column-container");s&&s.remove();const a=e.querySelector(".js-new-column-blankslate");if(a.remove(),e.innerHTML="",e.appendChild(n),s){e.appendChild(s);s.querySelector(".js-new-column-button").classList.toggle("d-none",0===l.columns.length)}e.appendChild(a),a.classList.toggle("d-none",l.columns.length>0),function(t){const e=document.querySelector(".js-project-column-nav");if(!e)return;const n=e.querySelector(".js-column-nav-template"),o=e.scrollLeft;let r;for(const c of document.querySelectorAll(".js-project-column-navigation-item"))c.remove(),c.classList.contains("selected")&&(r=c.getAttribute("data-column-id"));for(const c of t)P(n,e,c.id.toString(),c.name,c.card_ids.length.toString(),r===c.id.toString());e.scrollLeft=o}(l.columns);for(const e in t){document.getElementById(e).scrollTop=t[e]}await M(r,c)}const d=e.querySelectorAll(".js-project-column-card"),m=t(d),p={};for(const t of l.columns)for(const e of t.card_ids)p[e]=H(e.toString(),a);for(const t of l.columns){const e=document.getElementById("column-"+t.id);if(!e||"INCLUDE-FRAGMENT"===e.tagName)return;const n=e.querySelector(".js-project-column-name");if(n){n.textContent=t.name;const o=e.querySelector(".js-project-column-name-field");o instanceof HTMLInputElement&&(o.value=t.name,o.setAttribute("value",t.name))}const o=e.querySelector(".js-column-card-count");o&&(o.textContent=t.card_ids.length.toString()),_(t,e);R(e.querySelector(".js-project-column-cards"),t.card_ids,p)}o(e,"update-project"),await M(d,m),u&&document.activeElement!==u&&u.focus()}),100);const K="is",N="linked",U="title",W=["assignee","author",K,"label","milestone","repo","review","state","status","type",N],O={pr:"issue"},X=["issue","pr","note"],V=["assignee","label","milestone"],J=/[^\s:]+:("(?:\\"|.)*?"|[^\s]*)|[^\s]+/g;function G(t,e){let n=t[e];return n||(n={tokenFilters:[],matchIfMissing:!1},t[e]=n),n}function z(t,e,n){const o=t.tokenFilters.find((t=>t.token===e));o?o.negated=n:t.tokenFilters.push({token:e,negated:n}),t.matchIfMissing=!1}function Z(t,e){const n=`^-?${e}:\\s*"?(.*?)"?\\s*$`;return t.replace(new RegExp(n),"$1").replace(/\\(")/g,"$1").toLowerCase()}function Q(t){const e=t.match(J)||[],n={};for(const o of e){const t=W.find((t=>o.match(new RegExp(`^-?${t}:.*`))));if(t){const r=Z(o,t);if(r.length>0){if(z(G(n,t),r,o.startsWith("-")),t!==N)continue;const c=O[r],s=t=>t.some((t=>{const e=Z(t,K);return t!==e&&X.includes(e)}));if(c&&!s(e)){z(G(n,K),c,!1)}}}else{const t=V.find((t=>o==="no:"+t));if(t)G(n,t).matchIfMissing=!0;else if(o.length>0){z(G(n,U),o,!1)}}}return n}let Y,tt;function et(){return document.querySelector(".js-card-filter-input").value.trim().toLowerCase()}function nt(t,e){for(const o in e){const r=t.getAttribute("data-card-"+o)||"";let c=[];""!==r.trim()&&(c=JSON.parse(r));const s=e[o];if(s.matchIfMissing){if(c.length>0)return!1}else for(const t of s.tokenFilters)if(o===U){if(!ot(t.token,c))return!1}else{if(o===N&&!O[t.token])return!1;const e=(n=t.token,-1!==c.indexOf(n));if(t.negated){if(e&&c.length>0)return!1}else if(!e)return!1}}var n;return!0}function ot(t,e){return e.some((e=>e.startsWith(t)))}function rt(){const t=et();for(const e of document.querySelectorAll(".js-project-columns-container .js-project-column")){const n=e.querySelector(".js-filtered-column-card-count");if(t.length>0){const t=e.querySelectorAll(".js-project-column-card:not(.d-none)").length;n.textContent=`${t.toString()} result${1!==t?"s":""}`}n.classList.toggle("d-none",0===t.length)}}function ct(t){const e=function(){const t=et();return tt!==t&&(tt=t,Y=Q(t)),Y}();let n=nt(t,e);if(!n)for(const o of t.querySelectorAll(".js-issue-note, .js-issue-note-reference"))if(n=nt(o,e),n)break;t.classList.toggle("d-none",!n)}function st(){const t=document.querySelector(".js-card-filter-input"),e=et();document.querySelector(".js-card-filter-clear").classList.toggle("d-none",0===e.length),function(t,e){const n=new URL(window.location.href,window.location.origin),o=new URLSearchParams(n.search.slice(1));""===e?o.delete(t):o.set(t,e),n.search=o.toString(),m(p(),document.title,n.toString())}(t.name,e),function(t,e){for(const n of document.querySelectorAll(".js-project-fullscreen-link")){const o=new URL(n.getAttribute("href")||"",window.location.origin),r=new URLSearchParams(o.search.slice(1));""===e?r.delete(t):r.set(t,e),o.search=r.toString(),n.setAttribute("href",o.toString())}}(t.name,e)}function it(){for(const t of document.querySelectorAll(".js-project-columns-container .js-project-column-card"))ct(t);rt(),st()}const at=/:"[^"]*"?$/,lt=/(^|\s+)[^\s:]+$/,ut=/^(\s|$)/;function dt(t){!function(t){if(document.activeElement!==t)return!1;const e=t.value.slice(0,t.selectionEnd),n=t.value.slice(t.selectionEnd),o=0===t.value.trim().length;if(at.test(e))return!1;const r=lt.test(e)&&ut.test(n);return o||r}(t)?jt():function(t){const e=document.querySelector(".js-card-filter-suggester");if(e instanceof HTMLElement){e.classList.add("js-active-navigation-container"),e.classList.remove("d-none");const n=(t.value.slice(0,t.selectionEnd).match(pt)||[])[0],o=e.querySelector(".js-card-filter-suggester-helper-container"),r=o.querySelector(".js-card-filter-suggester-helper");mt.test(t.value)?(r.textContent=t.value,o.classList.remove("d-none")):o.classList.add("d-none");const c=e.querySelector(".js-card-filter-suggestions-header");let s=!1;for(const t of e.querySelectorAll(".js-card-filter-suggestion")){const e=t.getAttribute("data-value");e&&e.startsWith(n)?(t.classList.remove("d-none"),s=!0):t.classList.add("d-none")}c.classList.toggle("d-none",!s)}}(t)}const mt=/(^|\s)[^\s:]+$/,pt=/\S*$/;function jt(){const t=document.querySelector(".js-card-filter-suggester");t instanceof HTMLElement&&(t.classList.remove("js-active-navigation-container"),t.classList.add("d-none"))}function ft(t){const e=document.querySelector(".js-card-filter-input"),n=e.value;let o=t,r=!0;n.indexOf(o)>=0?(r=!1,o=n.replace(o,"")):n.length&&(o=`${n.trim()} ${o}`),e.value=o,function(t,e){for(const n of document.querySelectorAll(".js-card-filter[data-card-filter]"))n.getAttribute("data-card-filter")===e&&n.setAttribute("aria-pressed",t.toString())}(r,t),it()}const ht=!navigator.userAgent.match(/Macintosh/);function gt(t){switch(t){case" ":return"Space";case"ArrowUp":case"k":case"K":return"up";case"ArrowDown":case"j":case"J":return"down";case"ArrowLeft":case"h":case"H":return"left";case"ArrowRight":case"l":case"L":return"right";case"Enter":return"confirm";case"Escape":return"cancel";default:return t}}class ItemMove{constructor(t,e){this.item=t,this.onDone=e,this.moved=!1,this.moveInProgress=!1,this.blurring=!1,this.blurListener=this.handleBlur.bind(this),this.item.addEventListener("blur",this.blurListener),this.item.classList.add("moving")}handleBlur(t){!this.moveInProgress&&t.relatedTarget&&(this.blurring=!0,this.cancel())}isMetaKeyPressed(t){return ht?t.ctrlKey:t.metaKey}inPendingColumn(){return null!=this.item.closest(".js-project-pending-cards")}findColumn(t){return t?document.querySelector(`.js-project-column[data-id="${t}"]`):null}findCard(t){if(!t)return null;let e=document.querySelector(`.js-project-column-card[data-card-id="${t}"]`);return e||(e=document.querySelector(`.js-project-column-card[data-content-id="${t}"]`)),e}isColumn(t){return null!=t&&t.classList.contains("js-project-column")}getColumn(){return this.item.closest(".js-project-column")}getPane(){return this.item.closest(".js-project-pane")}getColumnName(){const t=this.getColumn(),e=t&&t.querySelector(".js-project-column-name");return e?e.textContent:""}getColumnsContainer(){return document.querySelector(".js-project-columns-container")}getNextColumn(){const t=this.getColumn();if(t){const e=t.nextElementSibling;if(this.isColumn(e))return e}return null}getPreviousColumn(){const t=this.getColumn();if(t){const e=t.previousElementSibling;if(this.isColumn(e))return e}return null}getFirstColumn(){return this.getColumnsContainer().querySelector(".js-project-column")}getLastColumn(){const t=this.getColumnsContainer().querySelectorAll(".js-project-column");return t[t.length-1]}getCardID(t){return t&&(t.getAttribute("data-card-id")||t.getAttribute("data-content-id"))||""}getColumnID(t){return t&&t.getAttribute("data-id")||""}isMoving(t){return t===this.item}updateAriaLabel(){}moveTransaction(t){try{this.moveInProgress=!0,t(this.item),this.blurring||(this.updateAriaLabel(),this.item.focus())}finally{this.moved=!0,this.moveInProgress=!1}}done(){this.item.removeEventListener("blur",this.blurListener),this.item.classList.remove("moving"),this.item.removeAttribute("aria-label"),this.onDone()}cancel(){}}class CardMove extends ItemMove{constructor(t,e,n){super(t,n),this.moveCard=e,this.pendingCard=this.inPendingColumn(),this.getPane()&&(this.paneColumnCards=t.closest(".js-project-column-cards")),this.columnID=this.getColumnID(this.getColumn()),this.previousCardID=this.getCardID(t.previousElementSibling),this.keydownListener=this.handleKeydown.bind(this),this.item.addEventListener("keydown",this.keydownListener),this.updateStartListener=this.handleUpdateStart.bind(this),this.getColumnsContainer().addEventListener("will-update-project",this.updateStartListener),this.updateEndListener=this.handleUpdateEnd.bind(this),this.getColumnsContainer().addEventListener("update-project",this.updateEndListener)}updateAriaLabel(){const t=this.getCardIndex(),e=t>=0?`to position ${t+1} of ${this.getCardCount()}`:"",n=`in ${this.getColumnName()} column`;this.item.setAttribute("aria-label",`Moved card ${e} ${n}`.trim())}handleUpdateStart(t){const e=this.getColumn();if(!e)return void this.done();if(!this.paneColumnCards&&!this.updatePreviousPosition(t.detail))return void this.done();const n=this.getColumnID(e);this.isColumnInState(t.detail,n)?this.updateSnapshot={columnID:n,indexInColumn:this.getCardIndex()}:this.done()}handleUpdateEnd(){const t=this.updateSnapshot;if(this.updateSnapshot=null,!t||!this.getColumn())return void this.done();const e=this.findCard(this.getCardID(this.item)),n=this.getColumnCards(this.findColumn(t.columnID));if(e&&n){this.moveToColumn(n);const o=n.children[t.indexInColumn];e!==o&&this.moveToBeforeCard(n,o)}}handleKeydown(t){const e=this.isMetaKeyPressed(t);switch(gt(t.key)){case"up":e?this.moveToTop():this.moveUp(),t.preventDefault();break;case"down":e?this.moveToBottom():this.moveDown(),t.preventDefault();break;case"left":e?this.moveToFirstColumn(t.shiftKey):this.moveLeft(t.shiftKey),t.preventDefault();break;case"right":e?this.moveToLastColumn(t.shiftKey):this.moveRight(t.shiftKey),t.preventDefault();break;case"confirm":this.confirm(),t.preventDefault();break;case"cancel":this.cancel(),t.preventDefault()}}updatePreviousPosition(t){if(!t||!t.columns)return!1;const e=this.getCardID(this.item);for(const n of t.columns)for(let t=0;t<n.card_ids.length;t++)if(e===n.card_ids[t].toString())return this.previousCardID=n.card_ids[t-1].toString(),this.columnID=n.id.toString(),!0;return!1}isColumnInState(t,e){if(!t||!t.columns)return!1;for(const n of t.columns)if(e===n.id.toString())return!0;return!1}getCardIndex(){const t=this.getColumnCards(this.getColumn());return t?Array.from(t.children).indexOf(this.item):-1}getCardCount(){const t=this.getColumnCards(this.getColumn());return t?t.querySelectorAll(".js-project-column-card").length:0}getColumnCards(t){return null!=t?t.querySelector(".js-project-column-cards"):null}moveToBeforeCard(t,e){this.moveTransaction((function(n){t.insertBefore(n,e)}))}moveToColumn(t){this.moveTransaction((function(e){t.appendChild(e)}))}moveUp(){const t=this.item.previousElementSibling,e=this.getColumnCards(this.getColumn());t&&e&&this.moveToBeforeCard(e,t)}moveToTop(){const t=this.getColumnCards(this.getColumn());t&&this.moveTransaction((function(e){t.prepend(e)}))}moveDown(){const t=this.item.nextElementSibling,e=this.getColumnCards(this.getColumn());if(t&&e){const n=t.nextElementSibling;n?this.moveToBeforeCard(e,n):this.moveToBottom()}else this.moveToBottom()}moveToBottom(){const t=this.getColumnCards(this.getColumn());t&&this.moveToColumn(t)}moveToFirstColumn(t){const e=this.getColumnCards(this.getFirstColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveToLastColumn(t){const e=this.getColumnCards(this.getLastColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveLeft(t){const e=this.getColumnCards(this.getPane()?this.getLastColumn():this.getPreviousColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}moveRight(t){const e=this.getColumnCards(this.getNextColumn());e&&(this.moveToColumn(e),t&&this.moveToTop())}done(){super.done(),this.item.removeEventListener("keydown",this.keydownListener),this.getColumnsContainer().removeEventListener("will-update-project",this.updateStartListener),this.getColumnsContainer().removeEventListener("update-project",this.updateEndListener)}confirm(){if(this.moved){let t=this.findColumn(this.columnID);this.pendingCard&&!t&&(t=document.querySelector(".js-project-pending-cards-container.js-project-column")),this.moveCard(this.item,t,{keyboardMove:!0})}this.done()}cancel(){let t,e;if(this.moved)if(this.previousCardID){const n=this.findCard(this.previousCardID);n&&(t=n.closest(".js-project-column-cards"),e=n.nextElementSibling)}else this.columnID?(t=this.getColumnCards(this.findColumn(this.columnID)),t&&(e=t.firstElementChild)):this.paneColumnCards&&(t=this.paneColumnCards,e=t.firstElementChild);t&&(e?this.moveToBeforeCard(t,e):this.moveToColumn(t)),this.done()}}class ColumnMove extends ItemMove{constructor(t,e,n){super(t,n),this.moveColumn=e,this.nextColumnID=this.getColumnID(t.nextElementSibling),this.keydownListener=this.handleKeydown.bind(this),this.item.addEventListener("keydown",this.keydownListener),this.updateListener=this.done.bind(this),this.getColumnsContainer().addEventListener("will-update-project-columns",this.updateListener)}updateAriaLabel(){const t=this.getColumnIndex(),e=t>=0?`to position ${t+1} of ${this.getColumnCount()}`:"";this.item.setAttribute("aria-label",`Moved ${this.getColumnName()} column ${e}`.trim())}getColumnIndex(){const t=this.getColumnsContainer().querySelectorAll(".js-project-column");return Array.from(t).indexOf(this.item)}getColumnCount(){return this.getColumnsContainer().querySelectorAll(".js-project-column").length}handleKeydown(t){const e=this.isMetaKeyPressed(t);switch(gt(t.key)){case"left":e?this.moveToFirstColumn():this.moveLeft(),t.preventDefault();break;case"right":e?this.moveToLastColumn():this.moveRight(),t.preventDefault();break;case"confirm":this.confirm(),t.preventDefault();break;case"cancel":this.cancel(),t.preventDefault()}}insertBefore(t){const e=this.getColumnsContainer();this.moveTransaction((function(n){e.insertBefore(n,t)}))}moveLeft(){const t=this.getPreviousColumn();t&&this.insertBefore(t)}moveRight(){const t=this.getNextColumn();if(t){const e=t.nextElementSibling;e&&this.isColumn(e)?this.insertBefore(e):this.moveToLastColumn()}else this.moveToLastColumn()}moveToFirstColumn(){const t=this.getFirstColumn();t&&this.insertBefore(t)}moveToLastColumn(){const t=this.getLastColumn();if(t){const e=t.nextElementSibling;e&&this.insertBefore(e)}}done(){super.done(),this.item.removeEventListener("keydown",this.keydownListener),this.getColumnsContainer().removeEventListener("will-update-project-columns",this.updateListener)}confirm(){this.moved&&this.moveColumn(this.item,{keyboardMove:!0}),this.done()}cancel(){if(this.moved){const t=this.findColumn(this.nextColumnID);t?this.insertBefore(t):this.moveToLastColumn()}this.done()}}let vt;const yt=document.querySelector(".js-client-uid");function bt(t,e){i(t,(async function(t,n,o){try{await e(t,n,o)}catch(r){throw r.response&&await Ct("project-update-error"),r}}))}function St(t){t.closest("details-dialog").toggle(!1)}async function Ct(t,e){const n=document.querySelector("#"+t),o=await b({content:n.content.cloneNode(!0),dialogClass:"project-dialog"});return e&&e.setAttribute("aria-expanded","true"),o.addEventListener("dialog:remove",(function(){e&&e.setAttribute("aria-expanded","false")}),{once:!0}),o}function qt(t,e){const n=t.querySelector(".js-column-card-count"),o=parseInt(n.textContent.trim()),r=t.getAttribute("data-id");let c,s=o+e;0===e&&(s=0),n.textContent=s.toString(),r&&(c=document.querySelector(`.js-project-column-navigation-item[data-column-id="${r}"] .js-column-nav-card-count`),c.textContent=s.toString());const i=`Contains ${s} ${1===s?"item":"items"}`;n.setAttribute("aria-label",i),c&&c.setAttribute("aria-label",i)}function Lt(t,e){const n=t.elements.namedItem("keyboard_move");e&&!0===e.keyboardMove?n.value="true":n.value=""}function At(t,e,n){e&&(!function(t){t.classList.contains("js-project-pending-cards-container")&&0===t.querySelectorAll(".js-project-column-card").length&&t.remove()}(e),qt(e,-1));const o=t.closest(".js-project-column");if(!o)return;const r=o.getAttribute("data-id");t.setAttribute("data-column-id",r),qt(o,1),function(){for(const t of document.querySelectorAll(".js-project-search-cards")){const e=t.querySelector(".js-search-cards-next-page");if(e instanceof HTMLInputElement){null==t.querySelector(".js-project-column-card")&&(e.value="1")}}}();const c=o.querySelector(".js-project-content-form");c.reset(),function(t,e){const n=t.elements.namedItem("card_id"),o=t.elements.namedItem("content_id"),r=t.elements.namedItem("content_type");if(!e)return n.value="",o.value="",void(r.value="");const c=e.getAttribute("data-card-id");c?(n.value=c,o.value="",r.value=""):(n.value="",o.value=e.getAttribute("data-content-id"),r.value=e.getAttribute("data-content-type")),t.elements.namedItem("client_uid").value=vt}(c,t);const s=t.previousElementSibling,i=c.elements.namedItem("previous_card_id");i.value=s?s.getAttribute("data-card-id"):"",Lt(c,n),S(c)}function wt(t){const e=t.item;if(e.closest(".js-project-triage-pane"))return;const n=t.from;At(e,n&&n.closest(".js-project-column")),e.focus()}function kt(t){const e=t.closest(".js-project-column");e&&qt(e,-1),t.remove()}yt&&(vt=yt.getAttribute("data-uid"));const Tt=/^#card-(\d+)$/;function Et(t,e){const n=document.querySelector(".js-reorder-columns-form");n.elements.namedItem("column_id").value=t.getAttribute("data-id");const o=t.previousElementSibling,r=n.elements.namedItem("previous_column_id");r.value=o?o.getAttribute("data-id"):"",Lt(n,e),S(n)}function xt(t){if(t.related&&!t.related.matches(".js-project-column"))return!1}function Mt(t){const e=t.item;Et(e),e.focus()}function It(){const t=document.querySelector(".js-project-search-form");t instanceof HTMLFormElement&&S(t)}function Dt(){const t=document.querySelector(".js-project-archived-cards-search-form");t instanceof HTMLFormElement&&S(t)}function $t(t,e,n){let o;return t&&(o=document.querySelector(`.js-project-column-card[data-card-id="${t}"]`)),!o&&e&&n&&(o=document.querySelector(`.js-project-column-card[data-content-type="${n}"][data-content-id="${e}"]`)),o}var Ht,_t;function Bt(t){const e=document.querySelector(".js-new-project-column-container"),n=document.querySelector(".js-new-column-blankslate"),o=e.querySelector(".js-new-column-button");n.classList.toggle("d-none",!t),o.classList.toggle("d-none",t),t&&Pt(".js-project-triage-pane",!1)}function Pt(t,e){for(const n of document.querySelectorAll(".js-project-header, .js-project-columns, .js-project-pane, .js-project-small-footer"))n.classList.toggle("hide-sm",e);for(const n of document.querySelectorAll(".js-project-columns"))n.classList.toggle("push-board-over",e);for(const n of document.querySelectorAll(t))n.classList.toggle("d-none",!e),n.classList.toggle("hide-sm",!e)}function Rt(t){const e=document.querySelector(".js-project-archived-cards-results");if(e){const n=e.getAttribute("data-project-archived-cards-url"),o=new URL(n,window.location.origin),r=new URLSearchParams(o.search.slice(1));t&&r.append("card_id",t),o.search=r.toString(),e.setAttribute("src",o.toString())}}function Ft(t,e){document.querySelector(".js-show-triage-field").value=e?"show":"",It()}function Kt(){for(const t of document.querySelectorAll(".js-project-search-cards")){const e=t.querySelectorAll(".js-project-column-card"),n={};for(const t of e){const e=t.getAttribute("id");e&&(n.hasOwnProperty(e)&&t.remove(),n[e]=!0)}}}function Nt(t){const e=t.closest(".js-details-container");e&&e.classList.remove("open","Details--on")}function Ut(t){"Escape"===a(t)&&Nt(t.currentTarget)}function Wt(t){const e=t.closest(".js-project-column");if(!e)return;const n=t.value;if(t.setAttribute("data-preview-text",n),/(gh-|issues\/|pull\/|projects\/|discussions\/|#)\d+/.test(n)){const t=e.querySelector(".js-preview-note-form");t.elements.namedItem("note").value=n,S(t)}else e.querySelector(".js-note-preview").innerHTML=""}function Ot(t){T(t);const e=t.querySelector(".js-task-list-field");e.defaultValue=e.value;for(const n of t.querySelectorAll(".task-list-item-checkbox"))n.defaultChecked=n.checked}n("change",".js-toggle-linked-repo-scope",(function(t){const e=t.currentTarget,n=e.form,o=n.querySelector(".js-project-triage-search-text"),r=o.value||"";let c;c=e.checked?r.replace(/(\s|^)repo:[^\s]*\s*/gi,"$1").trim():r.trim()+" repo:*",c!==r&&(o.value=c,S(n))})),n("click",".js-project-show-all-archived-cards",Dt),bt(".js-project-update-card",(async function(t,e){const n=(await e.html()).html.querySelector("*"),o=$t(n.getAttribute("data-card-id"),n.getAttribute("data-content-id"),n.getAttribute("data-content-type")),r=!(!o||o!==o.ownerDocument.activeElement);o&&o.replaceWith(n),r&&n.focus()})),Ht="project-clone-error",_t=async function(t,e){const n=await e.json(),o=n.json.project_url,r=n.json.job_status_url;try{await C(r),window.location=o}catch(c){o?(await Ct("project-clone-partial-error")).querySelector(".js-cloned-board-link").setAttribute("href",o):await Ct("project-clone-error")}},i(".js-project-clone-form",(async function(t,e,n){const o=t.querySelector(".form-actions"),r=t.querySelector(".js-project-loader");o.classList.add("d-none"),r.classList.remove("d-none");try{await _t(t,e,n)}catch(c){throw c.response&&await Ct(Ht),o.classList.remove("d-none"),r.classList.add("d-none"),c}})),bt(".js-convert-note-to-issue-form",(async function(t,e){try{await e.text(),St(t)}catch(n){if(!function(t){try{return t&&t.json&&"note_already_converted_to_issue"===t.json.error_code}catch(n){return!1}}(n.response))throw n;{const e=t.querySelector(".js-convert-note-error-container");e.innerHTML="",e.append(q(document,n.response.json.error_html))}}})),bt(".js-change-project-state-form",(async function(t,e){const n=document.activeElement;n instanceof HTMLElement&&t.contains(n)&&n.blur(),await e.text(),St(t)})),n("click",".js-add-project-description",(async function(){const t=await Ct("edit-project");t.querySelector("#edit-project-name").removeAttribute("autofocus"),t.querySelector("#edit-project-body").setAttribute("autofocus","")})),n("click",".js-project-target-owner",(function(t){const e="repository"===t.currentTarget.getAttribute("data-owner-type"),n=t.currentTarget.closest(".js-project-clone-dialog");if(n.querySelector(".js-project-clone-visibility").classList.toggle("d-none",e),e){n.querySelector(".js-project-clone-private").checked=!0}})),n("click",".js-refresh-project",(function(){window.location.reload()})),bt(".js-create-project-column",(async function(t,e){const n=await e.html(),o=n.html.querySelector("*");if(o.classList.contains("js-column-form-container")){t.closest(".js-column-form-container").replaceWith(o),Vt()}else{document.querySelector(".js-new-project-column-container").before(n.html),St(t),function(t){const e=document.querySelector(".js-project-column-nav");if(!e)return;P(e.querySelector(".js-column-nav-template"),e,t.getAttribute("data-id")||"",t.querySelector(".js-project-column-name").textContent,t.querySelector(".js-column-card-count").textContent,!0)}(o);const e=o.getAttribute("data-id");e&&(Qt(e),Zt(e),Yt());document.querySelector(".js-new-column-blankslate").classList.contains("d-none")||Bt(!1)}})),bt(".js-update-project-column",(async function(t,e){const n=(await e.html()).html.querySelector("*");if(n.classList.contains("js-column-form-container")){t.closest(".js-column-form-container").replaceWith(n),Vt()}else{const e=t.getAttribute("data-column-id");document.querySelector(`.js-project-column[data-id="${e}"]`).replaceWith(n),function(t){const e=t.getAttribute("data-id");if(!e)return;const n=document.querySelector(`.js-project-column-navigation-item[data-column-id="${e}"]`);n instanceof HTMLAnchorElement&&B(n,e,t.querySelector(".js-project-column-name").textContent,t.querySelector(".js-column-card-count").textContent)}(n),St(t)}})),bt(".js-delete-project-column",(async function(t,e){await e.text();const n=t.getAttribute("data-column-id"),o=document.querySelectorAll(".js-project-column");document.querySelector(`.js-project-column[data-id="${n}"]`).remove(),St(t),function(t){for(const e of document.querySelectorAll(".js-project-column-navigation-item"))if(t===e.getAttribute("data-column-id"))return void e.remove()}(n),1===o.length&&Bt(!0)})),bt(".js-archive-project-column",(async function(t,e){await e.text();const n=t.getAttribute("data-column-id");!function(t){t.querySelector(".js-project-column-cards").innerHTML="",qt(t,0)}(document.querySelector(`.js-project-column[data-id="${n}"]`)),St(t)})),s(".js-project-column-card, .js-project-column",{constructor:HTMLElement,initialize(t){t.id===document.location.hash.substr(1)&&setTimeout((()=>{document.querySelector(".js-project-page-mobile")||t.focus()}),1)}}),bt(".js-remove-card-after-request",(async function(t,e){await e.text(),kt(t.closest(".js-project-column-card")),It()})),bt(".js-archive-project-card",(async function(t,e){kt(t.closest(".js-project-column-card")),await e.text(),Dt()})),bt(".js-unarchive-project-card",(async function(t,e){const n=t.closest(".js-project-column-card"),o=n.getAttribute("data-column-id"),r=document.querySelector(`.js-project-column[data-id="${o}"] .js-project-column-cards`);r&&(r.append(n),At(n),n.focus()),e.text()})),bt(".js-project-archived-cards-search-form",(async function(t,e){const n=t.closest(".js-project-archived-cards-pane").querySelector(".js-project-column-cards");let o;n.textContent="Loading…",t.classList.add("loading");try{o=await e.html()}catch(r){}n.innerHTML="",o&&n.append(o.html),t.classList.remove("loading")})),f((async function({target:t}){if(t instanceof HTMLElement)t.matches(".js-project-column-card")?t.focus():t.matches(".js-project-column")&&(Qt(t.getAttribute("data-id")),Yt());else if(document.location.hash.length>0){const t=function(){const t=document.location.hash.match(Tt);return t?t[1]:null}();if(null!=t){const e=document.querySelector(".js-project-archived-cards-pane");if(e){const n=e.getAttribute("data-project-archived-card-url"),o=await fetch(n.replace("{card_id}",t),{headers:{"X-Requested-With":"XMLHttpRequest"}});if(o.ok){null!=await o.text()&&(Rt(t),Pt(".js-project-archived-cards-pane",!0))}}}}})),n("click",".js-show-project-triage",(function(){Pt(".js-project-pane",!1),Pt(".js-project-menu-pane",!0),Pt(".js-project-triage-pane",!0);const t=document.querySelector(".js-project-triage-pane");t.addEventListener("animationend",(function(){t.querySelector(".js-project-triage-search-text").focus()}),{once:!0})})),n("click",".js-show-archived-cards",(function(){Rt(),Pt(".js-project-pane",!1),Pt(".js-project-menu-pane",!0),Pt(".js-project-archived-cards-pane",!0)})),n("click",".js-show-project-menu",(function(){!function(){const t=document.querySelector(".js-project-activity-results");if(t){const e=t.getAttribute("data-project-activity-url"),n=new URL(e,window.location.origin);t.setAttribute("src",n.toString())}}(),Pt(".js-project-pane",!1),Pt(".js-project-menu-pane",!0)})),n("click",".js-hide-project-menu",(function(){Pt(".js-project-pane",!1)})),n("click",".js-show-triage",(function(t){Ft(0,!0)})),n("click",".js-hide-triage",(function(t){Ft(0,!1)})),bt(".js-project-search-form",(async function(t,e){if(function(t){const e=t.querySelector(".js-toggle-linked-repo-scope"),n=t.querySelector(".js-project-triage-search-text");return!!(e instanceof HTMLInputElement&&e.checked)&&(o=n.value,r="repo",null!=Q(o)[r]);var o,r}(t)){t.querySelector(".js-toggle-linked-repo-scope").checked=!1}t.classList.add("loading");const n=await e.html(),o=t.closest(".js-project-triage-pane").querySelector(".js-project-search-results");o.innerHTML="",o.append(n.html),t.classList.remove("loading")})),bt(".js-project-activity-form",(async function(t,e){const n=await e.html(),o=t.closest(".js-project-activity-pane"),r=o.querySelector(".js-project-activity-container");r&&(r.innerHTML="",r.append(n.html)),o&&o.classList.remove("Details--on")})),s(".js-project-column-card",(function(t){if(t.getAttribute("data-card-id")){const e=t.getAttribute("data-content-type"),n=t.getAttribute("data-content-id"),o=document.getElementById(`card-${e}-${n}`);o&&o.remove()}})),s(".js-more-search-cards-form",{subscribe:t=>h(t,"page:loaded",Kt)}),n("click",".js-dismiss-note-form-button",(function(t){Nt(t.currentTarget)})),j(".js-note-text",(function(t){const e=t;g(e,Wt),e.addEventListener("blur",(function(){L(e,Wt)}),{once:!0})})),s(".js-project-note-form",{subscribe:t=>h(t,"keyup",Ut)}),bt(".js-preview-note-form",(async function(t,e){const n=t.closest(".js-project-column"),o=n.querySelector(".js-note-text"),r=n.querySelector(".js-note-preview");let c;try{c=(await e.html()).html}catch(s){}r.innerHTML="",c&&o.getAttribute("data-preview-text")===o.value&&r.appendChild(c)})),n("tab-container-changed",".js-project-picker-tabs",(async function(t){const e=t.currentTarget.querySelector("remote-input");e.setAttribute("aria-owns",t.detail.relatedTarget.id),e.src=t.detail.relatedTarget.getAttribute("data-filter-url")})),bt(".js-project-note-form",(async function(t,e){const n=t.querySelector("textarea");n.disabled=!0;const o=t.querySelector("button");o.disabled=!0;const r=t.closest(".js-project-column");if(r){r.querySelector(".js-note-text").removeAttribute("data-preview-text")}let c;try{c=await e.html()}catch(s){if(c=s.response,r&&c&&409===c.status&&c.html){const t=r.querySelector(".js-note-preview");t.innerHTML="",t.appendChild(c.html)}return c&&422===c.status&&await Ct("project-update-error"),o.disabled=!1,n.blur(),n.disabled=!1,void n.focus()}if(r){r.querySelector(".js-note-preview").innerHTML="",function(t,e){t.querySelector(".js-project-column-cards").prepend(e),qt(t,1)}(r,c.html)}else!function(t,e){const n=e.querySelector("*");if(!n||!n.classList.contains("js-note-form-container")){const n=t.getAttribute("data-card-id"),o=document.getElementById("card-"+n);o&&o.replaceWith(e),t.reset(),St(t)}else t.closest(".js-note-form-container").replaceWith(e)}(t,c.html);n.blur(),n.disabled=!1,A(n,""),n.focus()})),bt(".js-project-column-card .js-comment-update",(async function(t,e,n){const o=t.closest(".js-task-list-container"),r=t.closest(".js-project-column-card"),c=t.getAttribute("data-note-version");let s;n.headers.set("X-Note-Version",c);try{s=await e.json()}catch(a){if(s=a.response,s&&422===s.status&&s.json.stale)return D(s.json.message),Ot(o),void w(r);throw a}t.setAttribute("data-note-version",s.json.note_version);const i=s.json.note;o.querySelector(".js-task-list-field").value=i;r.querySelector(".js-edit-note-template").content.querySelector(".js-edit-note-input").textContent=i,Ot(o)}));const Xt=r((function(){rt(),st()}),1);async function Vt(t){const e=document.querySelector(".js-project-column-automation");if(!e)return;const n=e.closest(".js-column-settings-form"),o=e.querySelector(".js-project-automation-options"),r=n.querySelector(".js-project-autmoation-loader"),c=n.querySelector(".js-column-purpose-details"),s=t||e.getAttribute("data-src");function i(t){c.hidden=t,r.hidden=!t}o.src=s,o.addEventListener("loadstart",(()=>i(!0))),o.addEventListener("loadend",(()=>i(!1)))}function Jt(t){return t.matches(".js-drag-by-handle")?"position-fixed":void 0}function Gt(t){return t.matches(".js-drag-by-handle")?".js-project-dragger":void 0}function zt(){let t;if(document.location.hash.startsWith("#column-")&&(t=document.getElementById(document.location.hash.substr(1))),t||(t=document.querySelector(".js-project-column")),t){const e=t.getAttribute("data-id");e&&(Qt(e),Yt())}}function Zt(t){if(!document.querySelector(".js-project-page-mobile"))return;const e=document.createElement("a");e.href="#column-"+t,m(null,"",e.href)}function Qt(t){for(const e of document.querySelectorAll(".js-project-column"))e.classList.toggle("hide-sm",t!==e.getAttribute("data-id")),t===e.getAttribute("data-id")?e.setAttribute("data-active-column",""):e.removeAttribute("data-active-column");for(const e of document.querySelectorAll(".js-project-column-navigation-item"))e.classList.toggle("selected",t===e.getAttribute("data-column-id"))}function Yt(){const t=document.querySelector(".js-project-column-navigation-item.selected");if(!t)return;const e=t.closest(".js-project-column-nav"),n=t.offsetLeft,o=t.offsetWidth,r=n+o,c=window.innerWidth;(r-e.scrollLeft>c||r<e.scrollLeft)&&(e.scrollLeft=n-c/2+o/2)}function te(){const t=document.querySelector(".js-project-issue-body-wrapper"),e=document.querySelector(".js-project-issue-body-container"),n=t.getBoundingClientRect().height,o=e.getBoundingClientRect().height>n;document.querySelector(".js-project-issue-body-blur").classList.toggle("d-none",!o),document.querySelector(".js-project-issue-body-details-target").classList.toggle("d-none",!o)}async function ee(t,e){const n=document.querySelector(".js-project-card-details-pane");if(!n)return!1;const o=t.getAttribute("href"),r=n.querySelector(".js-project-card-details"),c=t.closest(".js-project-pane"),s=null!=c;if(Pt(".js-project-card-details-pane",!0),n.querySelector(".js-project-card-details-header").classList.toggle("d-none",!s),c&&function(t,e){const n=t.querySelector(".js-project-card-details-back-template").content.cloneNode(!0),o=e.getAttribute("data-back-to-label"),r=e.getAttribute("data-back-to-class");n.querySelector(".js-project-card-details-back-to-title").textContent=o,n.querySelector(".js-project-card-details-back-link").classList.add(r);const c=t.querySelector(".js-project-card-details-back-container");c.innerHTML="",c.appendChild(n)}(n,c),o===r.getAttribute("data-issue-url"))return void(e&&ne());const i=function(t,e){const n=t.closest(".js-project-issue-details-container"),o=document.querySelector(".js-project-card-details-loader-template").content.cloneNode(!0),r=n.querySelector(".js-issue-octicon").classList.contains("open");o.querySelector(".js-issue-title").textContent=t.textContent,o.querySelector(".js-issue-number").textContent=n.querySelector(".js-issue-number").textContent,o.querySelector(".js-issue-state").textContent=r?"Close":"Reopen";const c=t.getAttribute("data-content-label");for(const a of o.querySelectorAll(".js-issue-type"))a.textContent=c;for(const a of o.querySelectorAll(".js-project-card-details-external-link"))a.setAttribute("href",t.getAttribute("href")||"#"),a.setAttribute("data-ga-click",`Project board, go to ${c}, location:sidebar`);o.querySelector(".js-hide-project-menu").classList.toggle("d-none",e);const s=o.querySelector(".js-issue-repository");s.textContent=t.getAttribute("data-content-repo-label"),s.setAttribute("href",t.getAttribute("data-content-repo-url")||"#");const i=o.querySelector(".js-project-card-details-loader-octicon");return i.innerHTML="",i.appendChild(n.querySelector(".js-issue-octicon").cloneNode(!0)),o}(t,s);let a;r.innerHTML="",r.appendChild(i),r.setAttribute("data-issue-url",o);try{a=await E(document,o+"/show_from_project")}catch(l){return void function(t,e){t.querySelector(".js-project-card-details-error").classList.remove("d-none"),t.querySelector(".js-project-card-details-loader").classList.add("d-none"),t.querySelector(".js-project-card-details-retry").addEventListener("click",(function(){t.removeAttribute("data-issue-url"),ee(e,!1)}),{once:!0})}(r,t)}if(r.getAttribute("data-issue-url")===o){const t=a.querySelector(".js-hide-project-menu");t&&t.classList.toggle("d-none",s),r.innerHTML="",r.appendChild(a),te(),e&&ne()}}function ne(){const t=document.querySelector(".js-project-card-details-pane");if(!t)return;t.querySelector(".js-project-card-details-external-link").focus()}function oe(t){if("d"!==t.key)return;const e=t.currentTarget.querySelectorAll(".js-project-card-issue-link");1===e.length&&(ee(e[0],!0),t.preventDefault())}function re(){const t=document.querySelector(".js-project-create-linked-repo-list"),e=t.querySelector(".js-blankslate"),n=document.querySelector(".js-project-create-linked-repo-search-input-group"),o=document.querySelector(".js-project-create-linked-repo-max"),r=t.querySelectorAll(".js-project-repo-link-badge").length,c=r>=parseInt(o.getAttribute("data-max"),10);n.classList.toggle("d-none",c),o.classList.toggle("d-none",!c),e.classList.toggle("d-none",r>0)}n("click",".js-card-filter-clear",(function(){const t=document.querySelector(".js-card-filter-input");t.value="",o(t,"input")})),n("change",".js-column-purpose-value",(function(t){Vt(t.currentTarget.getAttribute("data-preset-url"))})),s(".project-dialog .js-project-column-automation",(function(){Vt()})),s(".js-project-column-card",{constructor:HTMLElement,add(t){ct(t),Xt()},remove:Xt}),s(".js-card-filter-input",{constructor:HTMLInputElement,add(t){t.addEventListener("input",r(it,500)),g(t,(function(){dt(t)}))}}),n("focusin",".js-card-filter-input",(function(t){t.currentTarget instanceof HTMLInputElement&&dt(t.currentTarget)})),n("focusout:delay",".js-card-filter-input",(function(){jt()})),n("click",".js-card-filter-suggestion",(function(){document.querySelector(".js-card-filter-input").focus()})),n("click",".js-card-filter",(function(t){const e=t.currentTarget.getAttribute("data-card-filter");e&&ft(e)})),n("navigation:keydown",".js-card-filter-suggester",(function(t){switch(a(t.detail.originalEvent)){case"Escape":t.preventDefault(),jt();break;case"ArrowLeft":case"ArrowRight":case"Enter":jt()}})),n("navigation:open",".js-card-filter-suggester",(function(t){const e=document.querySelector(".js-card-filter-input");if(e instanceof HTMLInputElement){const n=document.querySelector(".js-card-filter-suggester"),r=t.target.getAttribute("data-value"),c=e.value.slice(0,e.selectionEnd).replace(/\S+$/,""),s=e.value.slice(e.selectionEnd);n.classList.contains("d-none")||(t.preventDefault(),e.value=c+r+s,o(e,"input"),dt(e)),jt()}})),s(".js-project-columns-container",{subscribe:t=>h(t,"socket:message",(async function(t){const e=t.detail.data;if(vt!==e.client_uid){const n=t.currentTarget;It(),Dt(),await v(),F(n,e)}else"column_automation_updated"===e.action&&null!=e.state&&function(t){for(const e of t.columns){const t=document.getElementById("column-"+e.id);t&&_(e,t)}}(e.state)}))}),document.addEventListener("socket:message",(function(t){const{data:e,name:n}=t.detail;if(e.locked&&function(){const t=document.querySelector(".js-project-lock-container");if(!t)return;const e=t.querySelector(".Popover"),n=e.classList.contains("d-none");if(e.classList.toggle("d-none",!0),!n){const e=document.activeElement;if(t.contains(e)){const t=document.querySelector(".js-project-header");t&&t.focus()}}}(),e.is_project_activity){const t=document.querySelector(".js-project-activity-pane");null==t||t.classList.add("Details--on")}n.startsWith("projects:metadata:")&&(document.title=e.name)}),{capture:!0}),s(".js-project-columns-drag-container",{constructor:HTMLElement,async add(t){const{Sortable:n}=await e.import("./chunk-sortable-behavior.js");n.create(t,{animation:150,draggable:".js-project-column",filter:".js-note-text, .js-redacted-project-column-card",preventOnFilter:!1,fallbackClass:Jt(t),handle:Gt(t),handleReplacedDragElement:!0,group:{name:"project-column",put:!1,pull:!1},onMove:xt,onUpdate:Mt})}}),s(".js-card-drag-container",{constructor:HTMLElement,async add(t){const{Sortable:n}=await e.import("./chunk-sortable-behavior.js");n.create(t,{animation:150,draggable:".js-project-column-card",filter:".js-redacted-project-column-card",preventOnFilter:!1,fallbackClass:Jt(t),fallbackOnBody:t.matches(".js-drag-by-handle"),handle:Gt(t),handleReplacedDragElement:!0,group:"project-card",onAdd:wt,onUpdate:wt})}}),s(".js-project-search-results-drag-container",{constructor:HTMLElement,async add(t){const{Sortable:n}=await e.import("./chunk-sortable-behavior.js");n.create(t,{sort:!1,animation:150,draggable:".js-project-column-card",fallbackClass:Jt(t),fallbackOnBody:t.matches(".js-drag-by-handle"),handle:Gt(t),group:{name:"project-card",put:!1,pull:!0},onAdd:wt,onUpdate:wt})}}),s(".js-project-column-card",(function(t){if(t.getAttribute("data-card-id")){const e=t.getAttribute("data-content-type"),n=t.getAttribute("data-content-id"),o=document.getElementById(`card-${e}-${n}`);o&&o.remove()}})),s(".js-client-uid-field",{constructor:HTMLInputElement,add(t){t.value=vt}}),s(".js-project-column[data-active-column]",{remove(){document.querySelector(".js-project-column[data-active-column]")||zt()}}),n("click",".js-project-column-navigation-item",(function(t){t.preventDefault();const e=t.currentTarget.getAttribute("data-column-id");Qt(e),Zt(e)})),n("click",".js-open-active-column-dialog",(function(t){const e=document.querySelector(".js-project-column[data-active-column]");if(e){const n=e.getAttribute("data-id");Ct(`${t.currentTarget.getAttribute("data-dialog-prefix")}-${n}`)}})),n("click",".js-toggle-project-edit-mode",(function(t){t.currentTarget.classList.toggle("selected"),document.body.classList.toggle("project-edit-mode")})),n("click",".js-move-card-to-column-button",(function(t){const e=t.currentTarget.getAttribute("data-card-id"),n=t.currentTarget.getAttribute("data-content-id"),o=t.currentTarget.getAttribute("data-content-type"),r=t.currentTarget.getAttribute("data-column-id"),c=$t(e,n,o),s=document.querySelector(`.js-project-column[data-id="${r}"] .js-project-column-cards`);if(c&&s){t.currentTarget.hasAttribute("data-change-active-column")&&(Qt(r),Zt(r),Yt());const e=c.closest(".js-project-column");s.prepend(c),At(c,e)}})),n("click",".js-add-note-button",(function(t){t.preventDefault();const e=document.querySelector(".js-project-column[data-active-column] .js-add-note-container .js-details-target");e&&u(e)})),n("click",".js-project-lock-info-button, .js-close-project-lock-popover",(function(){const t=document.querySelector(".js-project-lock-container .Popover"),e=t.classList.contains("d-none");t.classList.toggle("d-none",!e)})),l((function(t){t.matches(".js-project-card-details-pane .js-comment .js-comment-update")&&te()})),n("click",".js-hide-project-card-details",(function(){const t=document.querySelector(".js-project-card-details");t.removeAttribute("data-issue-url"),t.innerHTML=""})),j(".js-project-column-card",(function(t){t.addEventListener("keydown",oe),t.addEventListener("blur",(function(){t.removeEventListener("keydown",oe)}),{once:!0})})),n("click",".js-project-card-issue-link",(function(t){(function(t){return!(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey||0!==t.button)})(t)&&(ee(t.currentTarget,!1),t.preventDefault())})),bt(".js-project-card-issue-details-title",(async function(t,e){const n=t.closest(".js-details-container"),o=await e.json();u(n),null!=o.json.issue_title&&(n.querySelector(".js-issue-title").textContent=o.json.issue_title);for(const r of t.elements)(r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement)&&(r.defaultValue=r.value)})),n("auto-complete-change",".js-project-create-repo-link-auto-complete",(function(t){const e=t.target,n=e.querySelector(`.js-project-repo-link-badge[data-repo-name="${e.value}"]`);if(!n)return;const o=document.querySelector(".js-project-create-linked-repo-list"),r=n.querySelector(".js-repo-id");let c=!1;for(const s of o.querySelectorAll(".js-repo-id"))if(s.value===r.value){c=!0;break}c||(r.disabled=!1,o.append(n),n.classList.remove("d-none")),e.value="",re()})),n("click",".js-remove-project-repo-link",(function(t){t.target.closest(".js-project-repo-link-badge").remove(),re()})),y("keydown",".js-project-create-linked-repo-search",(function(t){"Enter"===t.key&&t.preventDefault()})),n("click",".js-project-dialog-button",(function({currentTarget:t}){Ct(t.getAttribute("data-dialog-id"),t)})),n("click",".js-project-card-closing-issue-summary",(function({currentTarget:t}){t.closest(".js-project-column-card").focus()})),n("click",".js-project-active-column-dialog-button",(async function({currentTarget:t}){const e=t.getAttribute("data-dialog-id");!function(t,e){const n=t.querySelector(".js-move-card-to-column-dialog-body"),o=e.closest(".js-project-column-card"),r=o.closest(".js-project-column"),c=r&&r.getAttribute("data-id"),s=document.querySelector("#move-card-to-column-button-template"),i=t.querySelector(".js-move-card-to-column-title");i.textContent=o.closest(".js-project-archived-cards-pane")?i.getAttribute("data-restore-title"):i.getAttribute("data-move-title"),n.innerHTML="";for(const a of document.querySelectorAll(".js-project-column-navigation-item")){const t=a.getAttribute("data-column-id"),r=s.content.cloneNode(!0).querySelector(".js-move-card-to-column-button");r.setAttribute("data-card-id",o.getAttribute("data-card-id")),r.setAttribute("data-content-id",o.getAttribute("data-content-id")),r.setAttribute("data-content-type",o.getAttribute("data-content-type")),r.setAttribute("data-column-id",t),e.hasAttribute("data-change-active-column")&&r.setAttribute("data-change-active-column",""),r.textContent=a.getAttribute("data-column-name"),r.disabled=null!=c&&t===c,n.appendChild(r)}}(await Ct(e,t),t)})),n("details-menu-select",".js-project-change-state-sync-menu",(function(t){const e=t.detail.relatedTarget,n=e.closest(".js-project-change-state-sync-menu-parent"),o=e.querySelector("[data-menu-button-text]").textContent.trim();n.querySelector(".js-project-change-state-sync-menu-button").textContent=o}),{capture:!0}),n("click",".js-project-card-closing-issue-summary",(function({currentTarget:t}){const e=!1===t.closest(".Details-element").hasAttribute("open"),n=e?"data-linked-pr-hmac-expanded":"data-linked-pr-hmac-collapsed",o=t.getAttribute(n)||"",r=e?"data-linked-pr-expanded":"data-linked-pr-collapsed",c=t.getAttribute(r)||"";k({hydroEventPayload:c,hydroEventHmac:o,hydroClientContext:""},!0)})),function(t,e){let n,o;function r(e){if(n)return;const o=e.currentTarget;switch(gt(e.key)){case"confirm":case"Space":if(o.classList.contains("js-redacted-project-column-card"))return;if(!o.classList.contains("js-keyboard-movable"))return;n=new CardMove(o,t,(function(){n=null})),e.preventDefault();break;case"up":{const t=o.previousElementSibling;if(t&&t.classList.contains("js-project-column-card"))t.focus(),e.preventDefault();else{const t=o.closest(".js-project-column");t instanceof HTMLElement&&(t.focus(),e.preventDefault())}break}case"down":{const t=o.nextElementSibling;t&&t.classList.contains("js-project-column-card")&&(t.focus(),e.preventDefault());break}}}function c(t){if(o)return;if(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement)return;const n=t.currentTarget;switch(gt(t.key)){case"confirm":case"Space":if(!n.classList.contains("js-keyboard-movable"))return;o=new ColumnMove(n,e,(function(){o=null})),t.preventDefault();break;case"down":{const e=n.querySelector(".js-project-column-card");e&&(e.focus(),t.preventDefault());break}case"left":{const e=n.previousElementSibling;e&&e.classList.contains("js-project-column")&&(e.focus(),t.preventDefault());break}case"right":{const e=n.nextElementSibling;e&&e.classList.contains("js-project-column")&&(e.focus(),t.preventDefault());break}}}j(".js-project-column-card",(function(t){if(n){if(n.isMoving(t))return;n.cancel()}t.addEventListener("keydown",r),t.addEventListener("blur",(function e(){n&&n.isMoving(t)||(t.removeEventListener("blur",e),t.removeEventListener("keydown",r))}))})),j(".js-project-column",(function(t){if(o){if(o.isMoving(t))return;o.cancel()}t.addEventListener("keydown",c),t.addEventListener("blur",(function e(){o&&o.isMoving(t)||(t.removeEventListener("blur",e),t.removeEventListener("keydown",c))}))}))}(At,Et),zt()}}}));
//# sourceMappingURL=projects-9d837e86.js.map
